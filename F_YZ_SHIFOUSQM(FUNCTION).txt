F_YZ_SHIFOUSQM	FUNCTION	1	"FUNCTION ""F_YZ_SHIFOUSQM"" (ARG_ORDERNO IN NUMBER,PISHISFSQM IN VARCHAR2) RETURN NUMBER IS
"
F_YZ_SHIFOUSQM	FUNCTION	2	"  RESULT NUMBER ;
"
F_YZ_SHIFOUSQM	FUNCTION	3	"  LL_RETURN         NUMBER(1);
"
F_YZ_SHIFOUSQM	FUNCTION	4	"  LL_ORDERCODE      NUMBER(10);
"
F_YZ_SHIFOUSQM	FUNCTION	5	"  LL_YPXH           NUMBER(10);
"
F_YZ_SHIFOUSQM	FUNCTION	6	"  LL_YZLX           NUMBER(2);
"
F_YZ_SHIFOUSQM	FUNCTION	7	"  LL_XH             NUMBER(10);
"
F_YZ_SHIFOUSQM	FUNCTION	8	"  LS_FJPB           VARCHAR2(9);
"
F_YZ_SHIFOUSQM	FUNCTION	9	"  LL_PSYPSQM        NUMBER(1);
"
F_YZ_SHIFOUSQM	FUNCTION	10	"  LL_WBYZSQM        NUMBER(1);
"
F_YZ_SHIFOUSQM	FUNCTION	11	"  LS_ypmc            VARCHAR2(60);
"
F_YZ_SHIFOUSQM	FUNCTION	12	"BEGIN
"
F_YZ_SHIFOUSQM	FUNCTION	13	"  SELECT NVL(YPXH, 0), NVL(XH, 0), NVL(ORDER_CODE, 0), NVL(YZLX, 0) INTO LL_YPXH, LL_XH, LL_ORDERCODE, LL_YZLX FROM YZ_INPATIENT_ORDER WHERE ORDER_NO = ARG_ORDERNO;
"
F_YZ_SHIFOUSQM	FUNCTION	14	"  IF LL_YPXH = 0 THEN  --诊疗医嘱
"
F_YZ_SHIFOUSQM	FUNCTION	15	"     BEGIN
"
F_YZ_SHIFOUSQM	FUNCTION	16	"             IF LL_YZLX = 3 THEN   -- 文本医嘱
"
F_YZ_SHIFOUSQM	FUNCTION	17	"               SELECT CSZ2 INTO LL_WBYZSQM FROM GY_XTCS WHERE CSMC = 'YZQM_WBYZSQM' ;
"
F_YZ_SHIFOUSQM	FUNCTION	18	"               IF LL_WBYZSQM = 1 THEN
"
F_YZ_SHIFOUSQM	FUNCTION	19	"                 LL_RETURN := 1 ;
"
F_YZ_SHIFOUSQM	FUNCTION	20	"               ELSE
"
F_YZ_SHIFOUSQM	FUNCTION	21	"                 LL_RETURN := 0 ;
"
F_YZ_SHIFOUSQM	FUNCTION	22	"               END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	23	"             ELSE
"
F_YZ_SHIFOUSQM	FUNCTION	24	"               SELECT NVL(SFSQM, 0) INTO LL_RETURN FROM YZ_ORDER_ITEM WHERE ORDER_CODE = LL_ORDERCODE ;
"
F_YZ_SHIFOUSQM	FUNCTION	25	"             END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	26	"     EXCEPTION
"
F_YZ_SHIFOUSQM	FUNCTION	27	"             WHEN OTHERS THEN
"
F_YZ_SHIFOUSQM	FUNCTION	28	"                  LL_RETURN := 0 ;
"
F_YZ_SHIFOUSQM	FUNCTION	29	"     END ;
"
F_YZ_SHIFOUSQM	FUNCTION	30	"  ELSE      --药品医嘱
"
F_YZ_SHIFOUSQM	FUNCTION	31	"    BEGIN
"
F_YZ_SHIFOUSQM	FUNCTION	32	"          SELECT CSZ2 INTO LL_PSYPSQM FROM GY_XTCS WHERE CSMC = 'YZQM_PSYPSQM' ;--义乌中心取his中的参数
"
F_YZ_SHIFOUSQM	FUNCTION	33	"          SELECT ypmc INTO LS_ypmc FROM GY_YPMCGGZD WHERE YPXH = LL_YPXH ;
"
F_YZ_SHIFOUSQM	FUNCTION	34	"          --IF PISHISFSQM = '1' THEN
"
F_YZ_SHIFOUSQM	FUNCTION	35	"          IF LL_PSYPSQM = '1' THEN
"
F_YZ_SHIFOUSQM	FUNCTION	36	"               SELECT FJPB INTO LS_FJPB FROM GY_YPMCGGZD WHERE YPXH = LL_YPXH ;
"
F_YZ_SHIFOUSQM	FUNCTION	37	"               IF SUBSTRING(LS_FJPB, 2, 1) = '1' THEN
"
F_YZ_SHIFOUSQM	FUNCTION	38	"                  LL_RETURN := 1 ;
"
F_YZ_SHIFOUSQM	FUNCTION	39	"               ELSE
"
F_YZ_SHIFOUSQM	FUNCTION	40	"                  LL_RETURN := 0 ;
"
F_YZ_SHIFOUSQM	FUNCTION	41	"               END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	42	"          ELSE
"
F_YZ_SHIFOUSQM	FUNCTION	43	"               LL_RETURN :=0 ;
"
F_YZ_SHIFOUSQM	FUNCTION	44	"          END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	45	"           if ls_ypmc = '青霉素皮试液' then
"
F_YZ_SHIFOUSQM	FUNCTION	46	"               LL_RETURN := 1 ;
"
F_YZ_SHIFOUSQM	FUNCTION	47	"          end if;
"
F_YZ_SHIFOUSQM	FUNCTION	48	"    EXCEPTION
"
F_YZ_SHIFOUSQM	FUNCTION	49	"               WHEN OTHERS THEN
"
F_YZ_SHIFOUSQM	FUNCTION	50	"                    LL_RETURN :=0 ;
"
F_YZ_SHIFOUSQM	FUNCTION	51	"    END;
"
F_YZ_SHIFOUSQM	FUNCTION	52	"  END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	53	"  IF LL_RETURN IS NULL THEN
"
F_YZ_SHIFOUSQM	FUNCTION	54	"     LL_RETURN := 0;
"
F_YZ_SHIFOUSQM	FUNCTION	55	"  END IF;
"
F_YZ_SHIFOUSQM	FUNCTION	56	"  RESULT := ll_Return;
"
F_YZ_SHIFOUSQM	FUNCTION	57	"  RETURN(RESULT);
"
F_YZ_SHIFOUSQM	FUNCTION	58	"END F_YZ_SHIFOUSQM;
"
F_YZ_SHIFOUSQM	FUNCTION	59	"
"
F_YZ_SHIFOUSQM	FUNCTION	60	"
"
F_YZ_SHIFOUSQM	FUNCTION	61	" 
"
