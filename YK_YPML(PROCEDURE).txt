YK_YPML	PROCEDURE	1	"PROCEDURE         ""YK_YPML"" (
"
YK_YPML	PROCEDURE	2	"        P_KFBZ   IN NUMBER ) IS
"
YK_YPML	PROCEDURE	3	"BEGIN
"
YK_YPML	PROCEDURE	4	"DECLARE
"
YK_YPML	PROCEDURE	5	"
"
YK_YPML	PROCEDURE	6	"   V_YPXH	NUMBER(6);
"
YK_YPML	PROCEDURE	7	"   V_YPCDDM	NUMBER(4);
"
YK_YPML	PROCEDURE	8	"   V_YPMC	VARCHAR2(36);
"
YK_YPML	PROCEDURE	9	"   V_YPGG	VARCHAR2(36);
"
YK_YPML	PROCEDURE	10	"   V_CDMC	VARCHAR2(36);
"
YK_YPML	PROCEDURE	11	"   V_YPBZDW     VARCHAR2(5);
"
YK_YPML	PROCEDURE	12	"   V_PFJ	NUMBER(16,6);
"
YK_YPML	PROCEDURE	13	"   V_LSJ	NUMBER(16,6);
"
YK_YPML	PROCEDURE	14	"   V_ZBLB	NUMBER(2);
"
YK_YPML	PROCEDURE	15	"
"
YK_YPML	PROCEDURE	16	"   V_GLXH	NUMBER(6);
"
YK_YPML	PROCEDURE	17	"   V_GLMC	VARCHAR2(36);
"
YK_YPML	PROCEDURE	18	"   V_FLXH	NUMBER(6);
"
YK_YPML	PROCEDURE	19	"   V_FLMC	VARCHAR2(36);
"
YK_YPML	PROCEDURE	20	"
"
YK_YPML	PROCEDURE	21	"   V_SRM1	VARCHAR2(8);
"
YK_YPML	PROCEDURE	22	"   V_SRM2	VARCHAR2(8);
"
YK_YPML	PROCEDURE	23	"   V_SRM3	VARCHAR2(8);
"
YK_YPML	PROCEDURE	24	"   V_YPSX	CHAR(11);
"
YK_YPML	PROCEDURE	25	"
"
YK_YPML	PROCEDURE	26	"   V_YPKZ	CHAR(20);
"
YK_YPML	PROCEDURE	27	"   V_ZYYPKZ	CHAR(20);
"
YK_YPML	PROCEDURE	28	"   V_YBYPDM	VARCHAR2(20);
"
YK_YPML	PROCEDURE	29	"   
"
YK_YPML	PROCEDURE	30	"   CURSOR CUR_CDJG IS
"
YK_YPML	PROCEDURE	31	"    SELECT YPXH,YPCDDM,YPMC,YPGG,CDMC,YPBZDW,PFJ,LSJ,ZBLB,SRM1,SRM2,SRM3,SUBSTR(YPKZ,1,20),SUBSTR(ZYYPKZ,1,20),YBYPDM,YPSX
"
YK_YPML	PROCEDURE	32	"    FROM GY_YPCDJG WHERE KFBZ = P_KFBZ AND BMXH IS NULL AND SUBSTR(YPSX,10,1) = '0' AND SUBSTR(BZ,1,1) = '0';
"
YK_YPML	PROCEDURE	33	"
"
YK_YPML	PROCEDURE	34	"BEGIN
"
YK_YPML	PROCEDURE	35	"
"
YK_YPML	PROCEDURE	36	"---- INIT
"
YK_YPML	PROCEDURE	37	"     DELETE FROM YK_YPML_TEMP WHERE KFBZ = P_KFBZ ;
"
YK_YPML	PROCEDURE	38	"
"
YK_YPML	PROCEDURE	39	"---- START
"
YK_YPML	PROCEDURE	40	"  OPEN CUR_CDJG;
"
YK_YPML	PROCEDURE	41	"  LOOP
"
YK_YPML	PROCEDURE	42	"       FETCH CUR_CDJG INTO V_YPXH,V_YPCDDM,V_YPMC,V_YPGG,V_CDMC,V_YPBZDW,V_PFJ,V_LSJ,V_ZBLB,V_SRM1,V_SRM2,V_SRM3,V_YPKZ,V_ZYYPKZ,V_YBYPDM,V_YPSX;
"
YK_YPML	PROCEDURE	43	"       EXIT WHEN CUR_CDJG%NOTFOUND;
"
YK_YPML	PROCEDURE	44	"
"
YK_YPML	PROCEDURE	45	"      BEGIN     
"
YK_YPML	PROCEDURE	46	"       SELECT GLXH,GLMC,FLXH INTO V_GLXH,V_GLMC,V_FLXH
"
YK_YPML	PROCEDURE	47	"       FROM GY_YPMCGGZD
"
YK_YPML	PROCEDURE	48	"       WHERE YPXH = V_YPXH;
"
YK_YPML	PROCEDURE	49	"       EXCEPTION      
"
YK_YPML	PROCEDURE	50	"	   WHEN NO_DATA_FOUND THEN
"
YK_YPML	PROCEDURE	51	"           V_GLXH := 0 ;
"
YK_YPML	PROCEDURE	52	"           V_GLMC := '´íÎó' ;
"
YK_YPML	PROCEDURE	53	"           V_FLXH := 0 ;
"
YK_YPML	PROCEDURE	54	"      END;
"
YK_YPML	PROCEDURE	55	"    
"
YK_YPML	PROCEDURE	56	"      BEGIN     
"
YK_YPML	PROCEDURE	57	"       SELECT FLXH INTO V_FLXH
"
YK_YPML	PROCEDURE	58	"       FROM GY_YPFLZD
"
YK_YPML	PROCEDURE	59	"       WHERE XH = V_FLXH;
"
YK_YPML	PROCEDURE	60	"       EXCEPTION      
"
YK_YPML	PROCEDURE	61	"	   WHEN NO_DATA_FOUND THEN
"
YK_YPML	PROCEDURE	62	"           V_FLXH := 0 ;
"
YK_YPML	PROCEDURE	63	"      END;
"
YK_YPML	PROCEDURE	64	"
"
YK_YPML	PROCEDURE	65	"      BEGIN     
"
YK_YPML	PROCEDURE	66	"       SELECT MC INTO V_FLMC
"
YK_YPML	PROCEDURE	67	"       FROM GY_YPFLZD
"
YK_YPML	PROCEDURE	68	"       WHERE XH = V_FLXH;
"
YK_YPML	PROCEDURE	69	"       EXCEPTION      
"
YK_YPML	PROCEDURE	70	"	   WHEN NO_DATA_FOUND THEN
"
YK_YPML	PROCEDURE	71	"           V_FLMC := '´íÎó' ;
"
YK_YPML	PROCEDURE	72	"      END;
"
YK_YPML	PROCEDURE	73	"
"
YK_YPML	PROCEDURE	74	"INSERT INTO YK_YPML_TEMP (KFBZ,YPXH,YPCDDM,GLXH,GLMC,FLXH,FLMC,YPMC,YPGG,CDMC,YPBZDW,PFJ,LSJ,ZBLB,SRM1,SRM2,SRM3,YPKZ,ZYYPKZ,YBYPDM,YPSX)
"
YK_YPML	PROCEDURE	75	"VALUES(P_KFBZ,V_YPXH,V_YPCDDM,V_GLXH,V_GLMC,V_FLXH,V_FLMC,V_YPMC,V_YPGG,V_CDMC,V_YPBZDW,V_PFJ,V_LSJ,V_ZBLB,V_SRM1,V_SRM2,V_SRM3,V_YPKZ,V_ZYYPKZ,V_YBYPDM,V_YPSX);
"
YK_YPML	PROCEDURE	76	"
"
YK_YPML	PROCEDURE	77	"   END LOOP;
"
YK_YPML	PROCEDURE	78	"   CLOSE CUR_CDJG;
"
YK_YPML	PROCEDURE	79	"
"
YK_YPML	PROCEDURE	80	"--COMMIT;
"
YK_YPML	PROCEDURE	81	"/*
"
YK_YPML	PROCEDURE	82	"EXCEPTION  -- exception handlers begin
"
YK_YPML	PROCEDURE	83	"   WHEN OTHERS THEN  -- handles all other errors
"
YK_YPML	PROCEDURE	84	"        ROLLBACK;
"
YK_YPML	PROCEDURE	85	"	RAISE_APPLICATION_ERROR(-20103,'YK_YPML FAILS');
"
YK_YPML	PROCEDURE	86	"*/
"
YK_YPML	PROCEDURE	87	"END;
"
YK_YPML	PROCEDURE	88	"END;
"
YK_YPML	PROCEDURE	89	"
"
YK_YPML	PROCEDURE	90	"
"
YK_YPML	PROCEDURE	91	"
"
YK_YPML	PROCEDURE	92	 
