YK_CRKPC_CK	PROCEDURE	1	"PROCEDURE         ""YK_CRKPC_CK"" (
"
YK_CRKPC_CK	PROCEDURE	2	"        P_XTXH   IN NUMBER,
"
YK_CRKPC_CK	PROCEDURE	3	"	P_CRKFSDM IN NUMBER,
"
YK_CRKPC_CK	PROCEDURE	4	"	P_KJQJ	 IN CHAR) IS
"
YK_CRKPC_CK	PROCEDURE	5	"BEGIN
"
YK_CRKPC_CK	PROCEDURE	6	"DECLARE
"
YK_CRKPC_CK	PROCEDURE	7	"
"
YK_CRKPC_CK	PROCEDURE	8	"   V_CRKDH	CHAR(8);
"
YK_CRKPC_CK	PROCEDURE	9	"   V_DWBH	NUMBER(4);
"
YK_CRKPC_CK	PROCEDURE	10	"   V_DWMC	VARCHAR2(40);
"
YK_CRKPC_CK	PROCEDURE	11	"   V_JJJE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	12	"   V_PFJE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	13	"   V_LSJE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	14	"   V_JXCE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	15	"   V_PLCE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	16	"   V_RLCE	NUMBER(14,4);
"
YK_CRKPC_CK	PROCEDURE	17	"   V_JZRQ	DATE;
"
YK_CRKPC_CK	PROCEDURE	18	"   V_YFKPB	NUMBER(1);
"
YK_CRKPC_CK	PROCEDURE	19	"   V_FPHM	NUMBER(3);
"
YK_CRKPC_CK	PROCEDURE	20	"   V_JSDH	NUMBER;
"
YK_CRKPC_CK	PROCEDURE	21	"   V_FKRQ	DATE;
"
YK_CRKPC_CK	PROCEDURE	22	"   V_YFKBZ	NUMBER(1);
"
YK_CRKPC_CK	PROCEDURE	23	"   V_QTPB	NUMBER(1);
"
YK_CRKPC_CK	PROCEDURE	24	"   V_COUNT1	NUMBER;
"
YK_CRKPC_CK	PROCEDURE	25	"   V_COUNT2	NUMBER;
"
YK_CRKPC_CK	PROCEDURE	26	"   V_JJHS	NUMBER(1);
"
YK_CRKPC_CK	PROCEDURE	27	"
"
YK_CRKPC_CK	PROCEDURE	28	"   CURSOR CUR_CKD IS
"
YK_CRKPC_CK	PROCEDURE	29	"    SELECT CKDH,JZRQ
"
YK_CRKPC_CK	PROCEDURE	30	"    FROM YK_YPCKD
"
YK_CRKPC_CK	PROCEDURE	31	"    WHERE XTXH = P_XTXH AND CRKFSDM = P_CRKFSDM AND
"
YK_CRKPC_CK	PROCEDURE	32	"          CKDH LIKE P_KJQJ||'%' AND YDZBZ = 1 ORDER BY CKDH;
"
YK_CRKPC_CK	PROCEDURE	33	"
"
YK_CRKPC_CK	PROCEDURE	34	"   CURSOR CUR_DJJE IS
"
YK_CRKPC_CK	PROCEDURE	35	"    SELECT NVL(SUM(ROUND(NVL(JJ,0) *SL,2)),0),
"
YK_CRKPC_CK	PROCEDURE	36	"           NVL(SUM(ROUND(NVL(PFJ,0)*SL,2)),0),
"
YK_CRKPC_CK	PROCEDURE	37	"           NVL(SUM(ROUND(NVL(LSJ,0)*SL,2)),0)
"
YK_CRKPC_CK	PROCEDURE	38	"    FROM YK_YPCKDMX
"
YK_CRKPC_CK	PROCEDURE	39	"    WHERE XTXH = P_XTXH AND CRKFSDM = P_CRKFSDM AND CKDH = V_CRKDH
"
YK_CRKPC_CK	PROCEDURE	40	"    GROUP BY XTXH,CRKFSDM,CKDH;
"
YK_CRKPC_CK	PROCEDURE	41	"
"
YK_CRKPC_CK	PROCEDURE	42	"BEGIN
"
YK_CRKPC_CK	PROCEDURE	43	"
"
YK_CRKPC_CK	PROCEDURE	44	"---- INIT
"
YK_CRKPC_CK	PROCEDURE	45	"  DELETE FROM YK_CRKPC_T WHERE XTXH =P_XTXH AND CRKFSDM = P_CRKFSDM;
"
YK_CRKPC_CK	PROCEDURE	46	"
"
YK_CRKPC_CK	PROCEDURE	47	"---- START
"
YK_CRKPC_CK	PROCEDURE	48	"  OPEN CUR_CKD;
"
YK_CRKPC_CK	PROCEDURE	49	"  LOOP
"
YK_CRKPC_CK	PROCEDURE	50	"       FETCH CUR_CKD INTO V_CRKDH,V_JZRQ;
"
YK_CRKPC_CK	PROCEDURE	51	"       EXIT WHEN CUR_CKD%NOTFOUND;
"
YK_CRKPC_CK	PROCEDURE	52	"
"
YK_CRKPC_CK	PROCEDURE	53	"
"
YK_CRKPC_CK	PROCEDURE	54	"-- START CUR_DJJE    
"
YK_CRKPC_CK	PROCEDURE	55	"  OPEN CUR_DJJE;
"
YK_CRKPC_CK	PROCEDURE	56	"  LOOP
"
YK_CRKPC_CK	PROCEDURE	57	"       FETCH CUR_DJJE INTO V_JJJE,V_PFJE,V_LSJE;
"
YK_CRKPC_CK	PROCEDURE	58	"       EXIT WHEN CUR_DJJE%NOTFOUND;
"
YK_CRKPC_CK	PROCEDURE	59	"
"
YK_CRKPC_CK	PROCEDURE	60	"	 V_JXCE := V_LSJE - V_JJJE;
"
YK_CRKPC_CK	PROCEDURE	61	"         V_PLCE := V_LSJE - V_PFJE;
"
YK_CRKPC_CK	PROCEDURE	62	"         V_RLCE := V_PFJE - V_JJJE;
"
YK_CRKPC_CK	PROCEDURE	63	"
"
YK_CRKPC_CK	PROCEDURE	64	"INSERT INTO YK_CRKPC_T
"
YK_CRKPC_CK	PROCEDURE	65	"(XTXH,CRKFSDM,CRKDH,DWBH,DWMC,JJJE,PFJE,LSJE,JXCE,PLCE,RLCE,
"
YK_CRKPC_CK	PROCEDURE	66	"JZRQ)
"
YK_CRKPC_CK	PROCEDURE	67	"VALUES
"
YK_CRKPC_CK	PROCEDURE	68	"(P_XTXH,P_CRKFSDM,V_CRKDH,V_DWBH,V_DWMC,V_JJJE,V_PFJE,V_LSJE,V_JXCE,V_PLCE,V_RLCE,
"
YK_CRKPC_CK	PROCEDURE	69	"V_JZRQ);
"
YK_CRKPC_CK	PROCEDURE	70	"
"
YK_CRKPC_CK	PROCEDURE	71	"   END LOOP;
"
YK_CRKPC_CK	PROCEDURE	72	"   CLOSE CUR_DJJE;
"
YK_CRKPC_CK	PROCEDURE	73	"-- END CUR_DJJE
"
YK_CRKPC_CK	PROCEDURE	74	"
"
YK_CRKPC_CK	PROCEDURE	75	"   END LOOP;
"
YK_CRKPC_CK	PROCEDURE	76	"   CLOSE CUR_CKD;
"
YK_CRKPC_CK	PROCEDURE	77	"
"
YK_CRKPC_CK	PROCEDURE	78	"EXCEPTION  -- exception handlers begin
"
YK_CRKPC_CK	PROCEDURE	79	"   WHEN OTHERS THEN  -- handles all other errors
"
YK_CRKPC_CK	PROCEDURE	80	"        ROLLBACK;
"
YK_CRKPC_CK	PROCEDURE	81	"	RAISE_APPLICATION_ERROR(-20103,'出入库批次--出库程序执行失败!');
"
YK_CRKPC_CK	PROCEDURE	82	"END;
"
YK_CRKPC_CK	PROCEDURE	83	"END;
"
YK_CRKPC_CK	PROCEDURE	84	"
"
YK_CRKPC_CK	PROCEDURE	85	"
"
YK_CRKPC_CK	PROCEDURE	86	 
