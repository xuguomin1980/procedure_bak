INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	1	"Trigger ""INSERT_ZY_PATIENT_INFORMATION2""
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	2	"  Before Insert    on zy_patient_information0301   for each row
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	3	"declare
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	4	"  row_nums number;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	5	"  nums     number;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	6	"begin
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	7	"
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	8	"  select round(dbms_random.value(1, 4), 0) into nums from dual;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	9	"
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	10	"  while nums > 0 loop
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	11	"    nums := nums - 1;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	12	"    select count(patient_no)
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	13	"      into row_nums
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	14	"      from zy_patient_information0301
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	15	"     where patient_no > 0
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	16	"       and name <> :new.name
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	17	"       and bah = :new.bah;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	18	"  
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	19	"    If row_nums > 0 Then
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	20	"      raise_application_error(-20300,
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	21	"                              '存在住院号相同,病人姓名不一致的记录!!!');
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	22	"      rollback;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	23	"    End If;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	24	"  end loop;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	25	"
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	26	"  select count(patient_no)
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	27	"    into row_nums
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	28	"    from zy_patient_information0301
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	29	"   where patient_no > 0
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	30	"     and name <> :new.name
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	31	"     and bah = :new.bah;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	32	"
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	33	"  If row_nums > 0 Then
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	34	"    raise_application_error(-20300,
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	35	"                            '存在住院号相同,病人姓名不一致的记录!!!');
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	36	"    rollback;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	37	"  End If;
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	38	"
"
INSERT_ZY_PATIENT_INFORMATION2	TRIGGER	39	"end INSERT_ZY_PATIENT_INFORMATION2;
"
