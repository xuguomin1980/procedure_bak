ZJS_YPTJ	PROCEDURE	1	"PROCEDURE         ""ZJS_YPTJ"" (
"
ZJS_YPTJ	PROCEDURE	2	"        P_TJDH   IN VARCHAR2,
"
ZJS_YPTJ	PROCEDURE	3	"        P_ZXR    IN VARCHAR2,
"
ZJS_YPTJ	PROCEDURE	4	"        P_DATE   IN VARCHAR2,
"
ZJS_YPTJ	PROCEDURE	5	"        P_XTXH   IN NUMBER) IS
"
ZJS_YPTJ	PROCEDURE	6	"BEGIN
"
ZJS_YPTJ	PROCEDURE	7	"DECLARE
"
ZJS_YPTJ	PROCEDURE	8	"
"
ZJS_YPTJ	PROCEDURE	9	"   V_YPBZL	GY_YPMCGGZD.YPBZL %TYPE;
"
ZJS_YPTJ	PROCEDURE	10	"
"
ZJS_YPTJ	PROCEDURE	11	"   V_JGXH	GY_YPCDJG.XH %TYPE;
"
ZJS_YPTJ	PROCEDURE	12	"   V_YPXH	GY_YPCDJG.YPXH %TYPE;
"
ZJS_YPTJ	PROCEDURE	13	"   V_YPCDDM	GY_YPCDJG.YPCDDM %TYPE;
"
ZJS_YPTJ	PROCEDURE	14	"   V_ZJJX	GY_YPCDJG.ZJJX %TYPE;
"
ZJS_YPTJ	PROCEDURE	15	"
"
ZJS_YPTJ	PROCEDURE	16	"   V_CRKFSDM	ZJS_CRKFS.CRKFSDM %TYPE;
"
ZJS_YPTJ	PROCEDURE	17	"   V_TJDH	ZJS_CRKFS.DQDH %TYPE;
"
ZJS_YPTJ	PROCEDURE	18	"
"
ZJS_YPTJ	PROCEDURE	19	"   V_ZJXTXH	ZJS_TJD.XTXH %TYPE;
"
ZJS_YPTJ	PROCEDURE	20	"   V_TJWH	ZJS_TJD.TJWH %TYPE;
"
ZJS_YPTJ	PROCEDURE	21	"   V_ZXRQ	ZJS_TJD.ZXRQ %TYPE;
"
ZJS_YPTJ	PROCEDURE	22	"
"
ZJS_YPTJ	PROCEDURE	23	"   V_XH		ZJS_TJDMX.XH %TYPE;
"
ZJS_YPTJ	PROCEDURE	24	"   V_TJSL	ZJS_TJDMX.TJSL %TYPE;
"
ZJS_YPTJ	PROCEDURE	25	"   V_YPFJ	ZJS_TJDMX.YPFJ %TYPE;
"
ZJS_YPTJ	PROCEDURE	26	"   V_YLSJ	ZJS_TJDMX.YLSJ %TYPE;
"
ZJS_YPTJ	PROCEDURE	27	"   V_XPFJ	ZJS_TJDMX.XPFJ %TYPE;
"
ZJS_YPTJ	PROCEDURE	28	"   V_XLSJ	ZJS_TJDMX.XLSJ %TYPE;
"
ZJS_YPTJ	PROCEDURE	29	"
"
ZJS_YPTJ	PROCEDURE	30	"   V_ZJSKC	NUMBER(13,3);
"
ZJS_YPTJ	PROCEDURE	31	"   V_FLAG       NUMBER(1) := 0;
"
ZJS_YPTJ	PROCEDURE	32	"   V_COUNT	NUMBER;
"
ZJS_YPTJ	PROCEDURE	33	"
"
ZJS_YPTJ	PROCEDURE	34	"   V_LSTJJG	NUMBER(16,6);
"
ZJS_YPTJ	PROCEDURE	35	"   V_PFTJJG	NUMBER(16,6);
"
ZJS_YPTJ	PROCEDURE	36	"   V_LSTJJE	NUMBER(16,6);
"
ZJS_YPTJ	PROCEDURE	37	"   V_PFTJJE	NUMBER(16,6);
"
ZJS_YPTJ	PROCEDURE	38	"
"
ZJS_YPTJ	PROCEDURE	39	"   V_ZY		VARCHAR2(70);
"
ZJS_YPTJ	PROCEDURE	40	"
"
ZJS_YPTJ	PROCEDURE	41	"   E_TJDHNOTFOUND EXCEPTION;
"
ZJS_YPTJ	PROCEDURE	42	"   E_ZJJXNOTFOUND EXCEPTION;
"
ZJS_YPTJ	PROCEDURE	43	"
"
ZJS_YPTJ	PROCEDURE	44	"   CURSOR CUR_ZJXTXH IS
"
ZJS_YPTJ	PROCEDURE	45	"   SELECT DISTINCT XTXH FROM ZJS_CRKFS;
"
ZJS_YPTJ	PROCEDURE	46	"
"
ZJS_YPTJ	PROCEDURE	47	"   CURSOR CUR_TJYP IS
"
ZJS_YPTJ	PROCEDURE	48	"    SELECT JGXH,YPXH,YPCDDM,XH,YPFJ,YLSJ,XPFJ,XLSJ
"
ZJS_YPTJ	PROCEDURE	49	"    FROM YK_YKTJDMX WHERE XTXH = P_XTXH AND TJDH = P_TJDH ORDER BY XH;
"
ZJS_YPTJ	PROCEDURE	50	"
"
ZJS_YPTJ	PROCEDURE	51	"BEGIN
"
ZJS_YPTJ	PROCEDURE	52	"
"
ZJS_YPTJ	PROCEDURE	53	"--   UPDATE GY_XTCS SET CSZ1=NULL WHERE XTXH=P_XTXH AND CSMC='TJDH' ;
"
ZJS_YPTJ	PROCEDURE	54	"--   COMMIT ;
"
ZJS_YPTJ	PROCEDURE	55	"
"
ZJS_YPTJ	PROCEDURE	56	"--GET ZXRQ
"
ZJS_YPTJ	PROCEDURE	57	"   SELECT SYSDATE INTO V_ZXRQ FROM DUAL;
"
ZJS_YPTJ	PROCEDURE	58	"
"
ZJS_YPTJ	PROCEDURE	59	"--获取调价文号
"
ZJS_YPTJ	PROCEDURE	60	"   BEGIN
"
ZJS_YPTJ	PROCEDURE	61	"     SELECT NVL(TJWH,'') INTO V_TJWH
"
ZJS_YPTJ	PROCEDURE	62	"     FROM YK_YKTJD
"
ZJS_YPTJ	PROCEDURE	63	"     WHERE XTXH = P_XTXH AND TJDH = P_TJDH;
"
ZJS_YPTJ	PROCEDURE	64	"     EXCEPTION
"
ZJS_YPTJ	PROCEDURE	65	"	WHEN OTHERS THEN  -- handles all other errors
"
ZJS_YPTJ	PROCEDURE	66	"        V_TJWH := '获取调价文号错误';
"
ZJS_YPTJ	PROCEDURE	67	"   END;
"
ZJS_YPTJ	PROCEDURE	68	"
"
ZJS_YPTJ	PROCEDURE	69	"---- START
"
ZJS_YPTJ	PROCEDURE	70	"  OPEN CUR_ZJXTXH;
"
ZJS_YPTJ	PROCEDURE	71	"  LOOP
"
ZJS_YPTJ	PROCEDURE	72	"    FETCH CUR_ZJXTXH INTO V_ZJXTXH;
"
ZJS_YPTJ	PROCEDURE	73	"    EXIT WHEN CUR_ZJXTXH%NOTFOUND;
"
ZJS_YPTJ	PROCEDURE	74	"
"
ZJS_YPTJ	PROCEDURE	75	"    V_CRKFSDM := 21;
"
ZJS_YPTJ	PROCEDURE	76	"
"
ZJS_YPTJ	PROCEDURE	77	"--GET TJDH
"
ZJS_YPTJ	PROCEDURE	78	"  BEGIN
"
ZJS_YPTJ	PROCEDURE	79	"     SELECT NVL(LPAD(DQDH+1,8,'0'),'00000001') INTO V_TJDH
"
ZJS_YPTJ	PROCEDURE	80	"     FROM ZJS_CRKFS WHERE XTXH = V_ZJXTXH AND CRKFSDM = V_CRKFSDM;
"
ZJS_YPTJ	PROCEDURE	81	"     EXCEPTION
"
ZJS_YPTJ	PROCEDURE	82	"        WHEN OTHERS THEN  -- handles all other errors
"
ZJS_YPTJ	PROCEDURE	83	"	  RAISE E_TJDHNOTFOUND;
"
ZJS_YPTJ	PROCEDURE	84	"  END;
"
ZJS_YPTJ	PROCEDURE	85	"
"
ZJS_YPTJ	PROCEDURE	86	"  UPDATE ZJS_CRKFS
"
ZJS_YPTJ	PROCEDURE	87	"  SET DQDH = V_TJDH
"
ZJS_YPTJ	PROCEDURE	88	"  WHERE XTXH = V_ZJXTXH AND CRKFSDM = V_CRKFSDM ;
"
ZJS_YPTJ	PROCEDURE	89	"
"
ZJS_YPTJ	PROCEDURE	90	"---GET TJYP
"
ZJS_YPTJ	PROCEDURE	91	"----------------------------------------------------------------------------------------
"
ZJS_YPTJ	PROCEDURE	92	"  OPEN CUR_TJYP;
"
ZJS_YPTJ	PROCEDURE	93	"  LOOP
"
ZJS_YPTJ	PROCEDURE	94	"    FETCH CUR_TJYP INTO V_JGXH,V_YPXH,V_YPCDDM,V_XH,V_YPFJ,V_YLSJ,V_XPFJ,V_XLSJ;
"
ZJS_YPTJ	PROCEDURE	95	"    EXIT WHEN CUR_TJYP%NOTFOUND;
"
ZJS_YPTJ	PROCEDURE	96	"
"
ZJS_YPTJ	PROCEDURE	97	"-- GET ZJJX
"
ZJS_YPTJ	PROCEDURE	98	"    BEGIN
"
ZJS_YPTJ	PROCEDURE	99	"      SELECT ZJJX INTO V_ZJJX
"
ZJS_YPTJ	PROCEDURE	100	"      FROM GY_YPCDJG
"
ZJS_YPTJ	PROCEDURE	101	"      WHERE XH = V_JGXH;
"
ZJS_YPTJ	PROCEDURE	102	"      EXCEPTION
"
ZJS_YPTJ	PROCEDURE	103	"        WHEN OTHERS THEN  -- handles all other errors
"
ZJS_YPTJ	PROCEDURE	104	"        V_ZJJX := 0;
"
ZJS_YPTJ	PROCEDURE	105	"    END;
"
ZJS_YPTJ	PROCEDURE	106	"
"
ZJS_YPTJ	PROCEDURE	107	"    IF V_ZJJX > 0 THEN   --如果存在ZJJX说明是制剂室的药,插入制剂室的各个表中
"
ZJS_YPTJ	PROCEDURE	108	"
"
ZJS_YPTJ	PROCEDURE	109	"    -- GET KCS
"
ZJS_YPTJ	PROCEDURE	110	"      BEGIN
"
ZJS_YPTJ	PROCEDURE	111	"        SELECT SUM(NVL(SL,0)) INTO V_ZJSKC
"
ZJS_YPTJ	PROCEDURE	112	"        FROM ZJS_YPKCZB
"
ZJS_YPTJ	PROCEDURE	113	"        WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM;
"
ZJS_YPTJ	PROCEDURE	114	"        EXCEPTION
"
ZJS_YPTJ	PROCEDURE	115	"           WHEN NO_DATA_FOUND THEN
"
ZJS_YPTJ	PROCEDURE	116	"           V_ZJSKC := 0;
"
ZJS_YPTJ	PROCEDURE	117	"      END;
"
ZJS_YPTJ	PROCEDURE	118	"
"
ZJS_YPTJ	PROCEDURE	119	"    -- GET YPBZL
"
ZJS_YPTJ	PROCEDURE	120	"      BEGIN
"
ZJS_YPTJ	PROCEDURE	121	"        SELECT YPBZL INTO V_YPBZL
"
ZJS_YPTJ	PROCEDURE	122	"        FROM GY_YPMCGGZD
"
ZJS_YPTJ	PROCEDURE	123	"        WHERE YPXH = V_YPXH;
"
ZJS_YPTJ	PROCEDURE	124	"        EXCEPTION
"
ZJS_YPTJ	PROCEDURE	125	"	   WHEN OTHERS THEN  -- handles all other errors
"
ZJS_YPTJ	PROCEDURE	126	"           V_YPBZL := 1;
"
ZJS_YPTJ	PROCEDURE	127	"      END;
"
ZJS_YPTJ	PROCEDURE	128	"
"
ZJS_YPTJ	PROCEDURE	129	"	V_TJSL := ROUND(V_ZJSKC/V_YPBZL,3);
"
ZJS_YPTJ	PROCEDURE	130	"	V_LSTJJG := V_XLSJ - V_YLSJ;
"
ZJS_YPTJ	PROCEDURE	131	"	V_PFTJJG := V_XPFJ - V_YPFJ;
"
ZJS_YPTJ	PROCEDURE	132	"        V_LSTJJE := ROUND((V_ZJSKC/V_YPBZL) * V_LSTJJG,2);
"
ZJS_YPTJ	PROCEDURE	133	"        V_PFTJJE := ROUND((V_ZJSKC/V_YPBZL) * V_PFTJJG,2);
"
ZJS_YPTJ	PROCEDURE	134	"
"
ZJS_YPTJ	PROCEDURE	135	"-- INSERT ZJS_TJDMX
"
ZJS_YPTJ	PROCEDURE	136	"INSERT INTO ZJS_TJDMX(XTXH,TJDH,XH,YPXH,YPCDDM,YKYPXH,TJSL,YPFJ,XPFJ,YLSJ,XLSJ,
"
ZJS_YPTJ	PROCEDURE	137	"                      YPBZL,BZYPBZL,ZJJX,YKXTXH,YKCRKFSDM,YKCRKDH)
"
ZJS_YPTJ	PROCEDURE	138	"VALUES(V_ZJXTXH,V_TJDH,V_XH,V_YPXH,V_YPCDDM,V_YPXH,V_TJSL,V_YPFJ,V_XPFJ,V_YLSJ,V_XLSJ,
"
ZJS_YPTJ	PROCEDURE	139	"                      V_YPBZL,V_YPBZL,V_ZJJX,P_XTXH,V_CRKFSDM,P_TJDH);
"
ZJS_YPTJ	PROCEDURE	140	"
"
ZJS_YPTJ	PROCEDURE	141	"      IF V_LSTJJG > 0 THEN
"
ZJS_YPTJ	PROCEDURE	142	"V_ZY := '调升从'||TO_CHAR(V_YLSJ)||'到'||TO_CHAR(V_XLSJ)||' 数量:'||TO_CHAR(V_TJSL);
"
ZJS_YPTJ	PROCEDURE	143	"INSERT INTO ZJS_KCMXZB(XTXH,CRKFSDM,CRKDH,XH,JGXH,YPXH,YPCDDM,YKYPXH,RQ,ZY,
"
ZJS_YPTJ	PROCEDURE	144	"                      JFSL,JFDJ,JFJE,DFSL,DFDJ,DFJE,JJ,PFJ,JFJJJE,DFJJJE,JFPFJE,DFPFJE,YPBZL,BZYPBZL,ZJJX,YSDJH)
"
ZJS_YPTJ	PROCEDURE	145	"VALUES(V_ZJXTXH,V_CRKFSDM,V_TJDH,V_XH,V_JGXH,V_YPXH,V_YPCDDM,V_YPXH,V_ZXRQ,V_ZY,
"
ZJS_YPTJ	PROCEDURE	146	"                      0,0,V_LSTJJE,0,0,0,0,0,0,0,V_PFTJJE,0,V_YPBZL,V_YPBZL,V_ZJJX,V_TJDH);
"
ZJS_YPTJ	PROCEDURE	147	"      ELSE
"
ZJS_YPTJ	PROCEDURE	148	"V_ZY := '调降从'||TO_CHAR(V_YLSJ)||'到'||TO_CHAR(V_XLSJ)||' 数量:'||TO_CHAR(V_TJSL);
"
ZJS_YPTJ	PROCEDURE	149	"INSERT INTO ZJS_KCMXZB(XTXH,CRKFSDM,CRKDH,XH,JGXH,YPXH,YPCDDM,YKYPXH,RQ,ZY,
"
ZJS_YPTJ	PROCEDURE	150	"                      JFSL,JFDJ,JFJE,DFSL,DFDJ,DFJE,JJ,PFJ,JFJJJE,DFJJJE,JFPFJE,DFPFJE,YPBZL,BZYPBZL,ZJJX,YSDJH)
"
ZJS_YPTJ	PROCEDURE	151	"VALUES(V_ZJXTXH,V_CRKFSDM,V_TJDH,V_XH,V_JGXH,V_YPXH,V_YPCDDM,V_YPXH,V_ZXRQ,V_ZY,
"
ZJS_YPTJ	PROCEDURE	152	"                      0,0,0,0,0,(-1)*V_LSTJJE,0,0,0,0,0,(-1)*V_PFTJJE,V_YPBZL,V_YPBZL,V_ZJJX,V_TJDH);
"
ZJS_YPTJ	PROCEDURE	153	"      END IF;
"
ZJS_YPTJ	PROCEDURE	154	"
"
ZJS_YPTJ	PROCEDURE	155	"-- INSERT ZJS_YPMXZ
"
ZJS_YPTJ	PROCEDURE	156	"INSERT INTO ZJS_YPMXZ(XTXH,CRKFSDM,CRKDH,XH,JGXH,YPXH,YPCDDM,YKYPXH,RQ,ZY,
"
ZJS_YPTJ	PROCEDURE	157	"                      PFJ,LSJ,YPBZL,BZYPBZL,ZJJX,YSDJH)
"
ZJS_YPTJ	PROCEDURE	158	"VALUES(V_ZJXTXH,V_CRKFSDM,V_TJDH,V_XH,V_JGXH,V_YPXH,V_YPCDDM,V_YPXH,V_ZXRQ,V_ZY,
"
ZJS_YPTJ	PROCEDURE	159	"                      V_PFTJJE,V_LSTJJE,V_YPBZL,V_YPBZL,V_ZJJX,V_TJDH);
"
ZJS_YPTJ	PROCEDURE	160	"
"
ZJS_YPTJ	PROCEDURE	161	"--对ZJS_YPKCZB的处理
"
ZJS_YPTJ	PROCEDURE	162	"      UPDATE ZJS_YPKCZB
"
ZJS_YPTJ	PROCEDURE	163	"      SET PFJ = V_XPFJ,LSJ = V_XLSJ
"
ZJS_YPTJ	PROCEDURE	164	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM;
"
ZJS_YPTJ	PROCEDURE	165	"
"
ZJS_YPTJ	PROCEDURE	166	"-- 对未登帐单据的处理
"
ZJS_YPTJ	PROCEDURE	167	"-- RKD  其实入库单和出库单的PFJ,LSJ也使用的是药库规格的价格,除非以后允许小规格出入库
"
ZJS_YPTJ	PROCEDURE	168	"      UPDATE ZJS_YPRKDMX
"
ZJS_YPTJ	PROCEDURE	169	"      SET PFJ = ROUND(V_XPFJ/BZYPBZL*YPBZL,5) ,LSJ = ROUND(V_XLSJ/BZYPBZL*YPBZL,3)
"
ZJS_YPTJ	PROCEDURE	170	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM AND YDZBZ = 0 AND LYFS = 0;
"
ZJS_YPTJ	PROCEDURE	171	"
"
ZJS_YPTJ	PROCEDURE	172	"-- CKD(除盘存22,报损23)
"
ZJS_YPTJ	PROCEDURE	173	"      UPDATE ZJS_YPCKDMX
"
ZJS_YPTJ	PROCEDURE	174	"      SET PFJ = ROUND(V_XPFJ/BZYPBZL*YPBZL,5) ,LSJ = ROUND(V_XLSJ/BZYPBZL*YPBZL,3)
"
ZJS_YPTJ	PROCEDURE	175	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM AND
"
ZJS_YPTJ	PROCEDURE	176	"            YDZBZ = 0 AND CRKFSDM NOT IN (22,23);
"
ZJS_YPTJ	PROCEDURE	177	"
"
ZJS_YPTJ	PROCEDURE	178	"-- CKD(盘存22,报损23的价格都使用的是大规格的价格)
"
ZJS_YPTJ	PROCEDURE	179	"      UPDATE ZJS_YPCKDMX
"
ZJS_YPTJ	PROCEDURE	180	"      SET PFJ = V_XPFJ,LSJ = V_XLSJ
"
ZJS_YPTJ	PROCEDURE	181	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM AND
"
ZJS_YPTJ	PROCEDURE	182	"            YDZBZ = 0 AND CRKFSDM IN (22,23);
"
ZJS_YPTJ	PROCEDURE	183	"
"
ZJS_YPTJ	PROCEDURE	184	"-- SCD 生产单的价格都使用的是大规格的价格
"
ZJS_YPTJ	PROCEDURE	185	"      UPDATE ZJS_TPD
"
ZJS_YPTJ	PROCEDURE	186	"      SET PFJ = V_XPFJ,LSJ = V_XLSJ
"
ZJS_YPTJ	PROCEDURE	187	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM AND YDZBZ = 0;
"
ZJS_YPTJ	PROCEDURE	188	"
"
ZJS_YPTJ	PROCEDURE	189	"      UPDATE ZJS_TPDMX
"
ZJS_YPTJ	PROCEDURE	190	"      SET PFJ = V_XPFJ,LSJ = V_XLSJ
"
ZJS_YPTJ	PROCEDURE	191	"      WHERE XTXH = V_ZJXTXH AND YKYPXH = V_YPXH AND YPCDDM = V_YPCDDM AND YDZBZ = 0;
"
ZJS_YPTJ	PROCEDURE	192	"
"
ZJS_YPTJ	PROCEDURE	193	"
"
ZJS_YPTJ	PROCEDURE	194	"      V_FLAG := 1;
"
ZJS_YPTJ	PROCEDURE	195	"
"
ZJS_YPTJ	PROCEDURE	196	"    END IF;
"
ZJS_YPTJ	PROCEDURE	197	"
"
ZJS_YPTJ	PROCEDURE	198	"   END LOOP;
"
ZJS_YPTJ	PROCEDURE	199	"   CLOSE CUR_TJYP;
"
ZJS_YPTJ	PROCEDURE	200	"
"
ZJS_YPTJ	PROCEDURE	201	"   IF V_FLAG = 1 THEN
"
ZJS_YPTJ	PROCEDURE	202	"	INSERT INTO ZJS_TJD(XTXH,TJDH,TJWH,ZXRQ,ZXR,YKXTXH,YKCRKFSDM,YKCRKDH)
"
ZJS_YPTJ	PROCEDURE	203	"	VALUES (V_ZJXTXH,V_TJDH,V_TJWH,V_ZXRQ,P_ZXR,P_XTXH,V_CRKFSDM,P_TJDH);
"
ZJS_YPTJ	PROCEDURE	204	"   END IF;
"
ZJS_YPTJ	PROCEDURE	205	"
"
ZJS_YPTJ	PROCEDURE	206	"   V_FLAG := 0;
"
ZJS_YPTJ	PROCEDURE	207	"
"
ZJS_YPTJ	PROCEDURE	208	"   END LOOP;
"
ZJS_YPTJ	PROCEDURE	209	"   CLOSE CUR_ZJXTXH;
"
ZJS_YPTJ	PROCEDURE	210	"
"
ZJS_YPTJ	PROCEDURE	211	"--   UPDATE GY_XTCS SET CSZ1 = P_TJDH
"
ZJS_YPTJ	PROCEDURE	212	"--   WHERE XTXH=P_XTXH AND CSMC='TJDH';
"
ZJS_YPTJ	PROCEDURE	213	"          --将新生成的调价单号放入参数表中,供程序中调用
"
ZJS_YPTJ	PROCEDURE	214	"
"
ZJS_YPTJ	PROCEDURE	215	"EXCEPTION  -- exception handlers begin
"
ZJS_YPTJ	PROCEDURE	216	"   WHEN E_TJDHNOTFOUND THEN
"
ZJS_YPTJ	PROCEDURE	217	"	ROLLBACK;
"
ZJS_YPTJ	PROCEDURE	218	"	RAISE_APPLICATION_ERROR(-20801,
"
ZJS_YPTJ	PROCEDURE	219	"	'制剂系统序号为'||TO_CHAR(V_ZJXTXH)||'的调价单号在表ZJS_CRKFS中取不到或发生错误!');
"
ZJS_YPTJ	PROCEDURE	220	"--   WHEN OTHERS THEN  -- handles all other errors
"
ZJS_YPTJ	PROCEDURE	221	"--        ROLLBACK;
"
ZJS_YPTJ	PROCEDURE	222	"--	RAISE_APPLICATION_ERROR(-20810,'FAILS');
"
ZJS_YPTJ	PROCEDURE	223	"END;
"
ZJS_YPTJ	PROCEDURE	224	"END;
"
ZJS_YPTJ	PROCEDURE	225	"
"
ZJS_YPTJ	PROCEDURE	226	 
