INSERT_ZY_PATIENT_INFORMATION	TRIGGER	1	"Trigger ""INSERT_ZY_PATIENT_INFORMATION""
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	2	"  Before Insert    on zy_patient_information   for each row
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	3	"declare
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	4	"  row_nums number;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	5	"  nums     number;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	6	"  v_msg    nvarchar2(200);
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	7	"begin
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	8	"
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	9	"  select round(dbms_random.value(1, 4), 0) into nums from dual;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	10	"
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	11	"  while nums > 0 loop
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	12	"    nums := nums - 1;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	13	"    select count(patient_no)
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	14	"      into row_nums
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	15	"      from zy_patient_information
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	16	"     where patient_no > 0
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	17	"       and name <> :new.name
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	18	"       and bah = :new.bah;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	19	"  
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	20	"    If row_nums > 0 Then
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	21	"      select :new.bah || ',存在住院号相同,病人姓名不一致的记录!!!'
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	22	"        into v_msg
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	23	"        from dual;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	24	"      raise_application_error(-20300, v_msg);
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	25	"      rollback;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	26	"    End If;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	27	"  end loop;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	28	"
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	29	"  select count(patient_no)
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	30	"    into row_nums
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	31	"    from zy_patient_information
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	32	"   where patient_no > 0
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	33	"     and name <> :new.name
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	34	"     and bah = :new.bah;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	35	"
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	36	"  If row_nums > 0 Then
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	37	"    select :new.bah || ',存在住院号相同,病人姓名不一致的记录!!!'
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	38	"      into v_msg
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	39	"      from dual;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	40	"    raise_application_error(-20300, v_msg);
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	41	"    rollback;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	42	"  End If;
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	43	"
"
INSERT_ZY_PATIENT_INFORMATION	TRIGGER	44	"end INSERT_ZY_PATIENT_INFORMATION;
"
