YK_JJPC	PROCEDURE	1	"PROCEDURE         ""YK_JJPC"" (
"
YK_JJPC	PROCEDURE	2	"        P_XTXH   IN NUMBER,
"
YK_JJPC	PROCEDURE	3	"	P_YPXH   IN NUMBER,
"
YK_JJPC	PROCEDURE	4	"	P_YPCDDM IN NUMBER) IS
"
YK_JJPC	PROCEDURE	5	"BEGIN
"
YK_JJPC	PROCEDURE	6	"DECLARE
"
YK_JJPC	PROCEDURE	7	"
"
YK_JJPC	PROCEDURE	8	"   V_RKDH	CHAR(8);
"
YK_JJPC	PROCEDURE	9	"   V_CRKFSDM    NUMBER(2);
"
YK_JJPC	PROCEDURE	10	"   V_JJ		NUMBER(16,6);
"
YK_JJPC	PROCEDURE	11	"   V_PFJ	NUMBER(16,6);
"
YK_JJPC	PROCEDURE	12	"   V_LSJ	NUMBER(16,6);
"
YK_JJPC	PROCEDURE	13	"   V_ZBLB	NUMBER(2);
"
YK_JJPC	PROCEDURE	14	"   V_RKRQ	DATE;
"
YK_JJPC	PROCEDURE	15	"   V_JZRQ	DATE;
"
YK_JJPC	PROCEDURE	16	"   V_DWMC	VARCHAR2(40);
"
YK_JJPC	PROCEDURE	17	"   V_XH		NUMBER(4);
"
YK_JJPC	PROCEDURE	18	"   V_DWBH	NUMBER(4);
"
YK_JJPC	PROCEDURE	19	"   V_SFZB	NUMBER(1);
"
YK_JJPC	PROCEDURE	20	"
"
YK_JJPC	PROCEDURE	21	"   CURSOR CUR_JJPC IS 
"
YK_JJPC	PROCEDURE	22	"    SELECT RKDH,CRKFSDM,JJ,PFJ,LSJ,ZBLB,XH,SFZB
"
YK_JJPC	PROCEDURE	23	"    FROM YK_YPRKDMX WHERE XTXH = P_XTXH AND YPXH = P_YPXH AND YPCDDM = P_YPCDDM ;
"
YK_JJPC	PROCEDURE	24	"
"
YK_JJPC	PROCEDURE	25	"BEGIN
"
YK_JJPC	PROCEDURE	26	"
"
YK_JJPC	PROCEDURE	27	"---- INIT
"
YK_JJPC	PROCEDURE	28	"--     DELETE FROM YK_JJPC_TEMP WHERE XTXH = P_XTXH AND YPXH = P_YPXH AND YPCDDM = P_YPCDDM ;
"
YK_JJPC	PROCEDURE	29	"  DELETE FROM YK_JJPC_TEMP WHERE XTXH = P_XTXH;
"
YK_JJPC	PROCEDURE	30	"
"
YK_JJPC	PROCEDURE	31	"---- START
"
YK_JJPC	PROCEDURE	32	"  OPEN CUR_JJPC;
"
YK_JJPC	PROCEDURE	33	"  LOOP
"
YK_JJPC	PROCEDURE	34	"       FETCH CUR_JJPC INTO V_RKDH,V_CRKFSDM,V_JJ,V_PFJ,V_LSJ,V_ZBLB,V_XH,V_SFZB;
"
YK_JJPC	PROCEDURE	35	"       EXIT WHEN CUR_JJPC%NOTFOUND;
"
YK_JJPC	PROCEDURE	36	"    
"
YK_JJPC	PROCEDURE	37	"      BEGIN     
"
YK_JJPC	PROCEDURE	38	"       SELECT RKRQ,JZRQ,GHDWBH INTO V_RKRQ,V_JZRQ,V_DWBH
"
YK_JJPC	PROCEDURE	39	"       FROM YK_YPRKD
"
YK_JJPC	PROCEDURE	40	"       WHERE XTXH = P_XTXH AND RKDH = V_RKDH AND CRKFSDM = V_CRKFSDM;
"
YK_JJPC	PROCEDURE	41	"       EXCEPTION      
"
YK_JJPC	PROCEDURE	42	"	   WHEN NO_DATA_FOUND THEN
"
YK_JJPC	PROCEDURE	43	"           V_DWBH := 0;
"
YK_JJPC	PROCEDURE	44	"      END;
"
YK_JJPC	PROCEDURE	45	"
"
YK_JJPC	PROCEDURE	46	"      BEGIN
"
YK_JJPC	PROCEDURE	47	"       SELECT DWMC INTO V_DWMC
"
YK_JJPC	PROCEDURE	48	"       FROM YK_JHDW
"
YK_JJPC	PROCEDURE	49	"       WHERE XTXH = P_XTXH AND DWBH = V_DWBH;
"
YK_JJPC	PROCEDURE	50	"       EXCEPTION      
"
YK_JJPC	PROCEDURE	51	"	   WHEN NO_DATA_FOUND THEN
"
YK_JJPC	PROCEDURE	52	"           V_DWMC := '´íÎó';
"
YK_JJPC	PROCEDURE	53	"      END;
"
YK_JJPC	PROCEDURE	54	"
"
YK_JJPC	PROCEDURE	55	"  INSERT INTO YK_JJPC_TEMP (XTXH,YPXH,YPCDDM,RKDH,CRKFSDM,XH,JJ,PFJ,LSJ,ZBLB,RKRQ,JZRQ,DWMC,SFZB)     
"
YK_JJPC	PROCEDURE	56	"  VALUES(P_XTXH,P_YPXH,P_YPCDDM,V_RKDH,V_CRKFSDM,V_XH,V_JJ,V_PFJ,V_LSJ,V_ZBLB,V_RKRQ,V_JZRQ,V_DWMC,V_SFZB);
"
YK_JJPC	PROCEDURE	57	"
"
YK_JJPC	PROCEDURE	58	"   END LOOP;
"
YK_JJPC	PROCEDURE	59	"   CLOSE CUR_JJPC;
"
YK_JJPC	PROCEDURE	60	"
"
YK_JJPC	PROCEDURE	61	"--COMMIT;
"
YK_JJPC	PROCEDURE	62	"
"
YK_JJPC	PROCEDURE	63	"EXCEPTION  -- exception handlers begin
"
YK_JJPC	PROCEDURE	64	"   WHEN OTHERS THEN  -- handles all other errors
"
YK_JJPC	PROCEDURE	65	"        ROLLBACK;
"
YK_JJPC	PROCEDURE	66	"	RAISE_APPLICATION_ERROR(-20103,'YK_JJPC FAILS');
"
YK_JJPC	PROCEDURE	67	"END;
"
YK_JJPC	PROCEDURE	68	"END;
"
YK_JJPC	PROCEDURE	69	"
"
YK_JJPC	PROCEDURE	70	"
"
YK_JJPC	PROCEDURE	71	"
"
YK_JJPC	PROCEDURE	72	 
